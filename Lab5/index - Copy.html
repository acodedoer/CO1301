<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../assets/highlight/styles/default.css">
    <link rel="stylesheet" href="../assets/style.css">
    <script src="../assets/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <title>Lab 5 - Game States</title>
</head>
<body>
    <header><h1>CO1301: Games Concepts <br> Lab 5 - Game States</h1></header>
    <main>
        <section>
            <h2>1. Introduction</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                               </p>
                           </div>
                    </li>
                </ol>
        </section>
        <section>
            <h2>2. Setting Up</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                                    Create a new TL-Engine project named <b>Lab5_GameStates_Project</b>.
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                                    Download the model and texture files from the website and unzip them into your new working directory.
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                                    The model you've just downloaded is called "particle.x", you also downloaded 7 of its texture files.
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                                    In your working directory, create and start a new TL-Engine project named <b>Lab5_GameStates_Project</b>
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item"> In your new project, create a camera at location ( 0, 0, -40 ). You don't need to move the camera at all today so set camera type to 'kManual'.
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Load and create a model using "Stars.x" to serve as your skybox.
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Using the downloaded "particle.x" mesh, create a model called "particle". Place it at the origin ( 0, 0, 0 ) and run your program. If you've placed the camera correctly then you'll see a hexagonally shaped light in the middle of the screen. This model has been created using a technique called texture blending and this makes the model semi-transparent.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Include a line of code within the main game loop to make the model rotate slowly around its local Z axis.
                            </p>
                        </div>
                    </li>  
                </ol>
        </section>     
        <section>
            <h2>3. Removing Models</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Whenever we want to create a model, we use the 'CreateModel' method of an IMesh* variable. It is also possible to remove a model using the 'RemoveModel' method of its mesh. For example, the code below will remove the 'particle' you created earlier:
                                <pre><code>particleMesh->RemoveModel( particle );</code></pre>
                                Note that the 'RemoveModel' method is passed the IModel* variable of the model to be removed as a paramter.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The removal of a model means that it is completely destroyed. It is no longer possible to use the model since it no longer exists and, indeed, if you tried (for example) to move the model after removal you would generate a real time error.
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Get rid of the rotate statement from your program if you've got one (otherwise the program will crash after the next addition).
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Include an if block within the main game loop so that when the Return key is hit, this removes the particle model. This should generate a real-time error and cause the program to crash. The code for the Return key is Key_Return.
                            </p>
                        </div>
                    </li> 
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Although the model has been destroyed the IModel* variable still exists. This is because the IModel* variable is a particular kind of variable called a pointer, which is declared using an asterisk (*). The pointer still exists, but the removal of the model means it no longer has anything to point at. However, the IModel variable can be re-used to point to a newly created model. For example, the code below serves no real purpose but it does show this process of removing a model and reusing its IModel* variable:
<pre><code>IModel* particle = particleMesh->CreateModel( ); // declare variable and create model
particleMesh->RemoveModel( particle ); // remove model
particle = particleMesh->CreateModel( ); // create new model
</code></pre>
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">In the next few steps, we will modify the program so the model is removed or created when the 'Retun Key' is hit, based on the state of the game.
                            </p>
                        </div>
                    </li> 
                </ol>
        </section>   
        <section>
            <h2>4. Using Variables to Store Game State</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                                <p class= "instruction-item">
                                    Declare an integer variable called particleState and set its value to 0. The variable should be declared outside the game loop.
                               </p>
                           </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The logic of the program we want to code is as follows:
                                <ul>
                                    <li>If the Return key is hit and the particleState is 0, this means that particle exists, therefore the particle model is removed and the particleState is set to 1.</li>
                                    <li>If the Return key is hit and the particleState is 1, this means that particle does not exist, therefore the particle model is created and the particleState is set to 0.</li>
                                </ul>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The code to implement this looks as follows:
<pre><code>if( myEngine->KeyHit( Key_Return ) )
{
    if( particleState == 0 )
    {
        particleMesh->RemoveModel( particle );
        particleState = 1;
    }
    else
    {
        particle = particleMesh->CreateModel(  );
        particleState = 0;
    }
}
</code></pre>
                                In this fashion you can track the state of your program. In this particular example you are keeping track of whether or not the particle model exists. Furthermore, you are using the state of the particle to determine what action the program needs to take: whether to create the particle or to remove it. States are used extensively within game programming and throughout software engineering in general.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                In exercises that follow, use states to change the texture of the particle. The textures you have been provided with are all of different colours so changing the texture will cause the particle to change colour. Remember that in order to change the texture you use the SetSkin() method:
                                <pre><code>particle->SetSkin("")</code></pre>
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
        <section>
            <h2>5. Practice Exercise - Game States</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Reuse the integer variable 'particleState' to change the texture of the particle model when the 'Return Key' is hit. There are seven textures provided, therefore everytime the key is hit the next texture in the sequence is used. When the last of the textures has been reached the first one should be re-used, this way the program cycles around as the key is hit.<br/><br/>
                                Hints:
                                <ul>
                                    <li>Set the value of 'particleState' to 0.</li>
                                    <li>Since there are 7 textures the value of 'particleState' will range from 0 to 6.</li>
                                    <li>Use a sequence of "else if" commands to check the state of the game (i.e. the value of 'particleState') and then set the appropriate model skin.</li>
                                </ul>
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
    </main>
    <script src="../assets/script.js"></script>
</body>
</html>