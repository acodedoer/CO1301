<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../assets/highlight/styles/default.css">
    <link rel="stylesheet" href="../assets/style.css">
    <script src="../assets/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <title>Lab 7 - Vectors Continued</title>
</head>
<body>
    <header><h1>CO1301: Games Concepts <br>Lab 7 - Vectors Continued</h1></header>
    <main>
        <section>
            <h2>1. Introduction</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                You are going to carry on with the previous matchbox racer program. You can use own version of the program if it easily available otherwise download the code from the website and use it instead. It uses the keys ‘W’, ‘S’ ‘A’ & ‘D’ to drive the matchbox, cursors and mouse to move the camera.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Spend some time reading through the code and reminding yourself how it works. Note the different processes used in the ‘Game Setup’ section and the ‘Game Loop’ section
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                If you created a chase camera in the previous session, change it back to a ‘kFPS’ camera
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Now load and create a ‘Turret’ model. Initialise its position to be (  200, 15, 200 )
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Load a ‘Bullet’ mesh. Declare a variable for a bullet model – but don’t create it yet.
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
        <section>
            <h2>2. The LookAt() Method</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                LookAt() is a method for models (or cameras) that points the local Z-axis towards another model. This effectively makes the first model/camera look at the second:
                                <pre><code>model1->LookAt( sphere );</code></pre>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Use the new ‘LookAt’ function to make the turret always point at the matchbox. Think carefully whether to put this in the game setup or game loop section. Move the car around to test that the turret continues to point at the car.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create a new integer variable (in the setup area) called ‘shoot’ and initialise it to –1. You will use this variable to track a bullet fired by the turret:
                                <ul>
                                    <li>When it is –1 there is no bullet</li>
                                    <li>When a bullet is created we set this variable to a large value that will count down as the bullet travels – this is the life-time of the bullet</li>
                                    <li>When the counter reaches 0 the bullet will be destroyed - then we will reset the value to -1 to indicate there is no bullet again</li>
                                    <li>This will allow the turret to fire one bullet at a time, and the bullet will have a limited range depending on its life-time</li>
                                </ul>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create three floating points variables (in the setup area) called bulletX, bulletY and bulletZ. These will hold the direction vector used to move the bullet. These variables will be used in exactly the same way as the vector was used in the Week 9 lab to move the particle.
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>3. Representing Direction with Vectors</h2>
                <div class="section_instrcutions"></div>
                    <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                    The direction of movement between two points is described by a vector. In order to fire a bullet at the car you need to know the direction of movement between the turret and the car. The vector between two points is calculated by subtracting the position of one point from the position of the second point.
                            <pre><code>float vectorX;
                                    float vectorY;
                                    float vectorZ;
                                    vectorX = Model2->GetX() – Model1->GetX();
                                    vectorY = Model2->GetY() – Model1->GetY();
                                    vectorZ = Model2->GetZ() – Model1->GetZ();
                                </code></pre>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                In the game loop, (the update area), calculate the vector from the turret to the matchbox. The x, y and z coordinates of the turret and of the car can be found using GetX(), GetY() and GetZ(). The result of the calculation should be assigned to vectorX, vectorY and vectorZ.
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Check that you have the matchbox and turrent locations the right way around in the calculation.
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>4. Calculating the Distance Between Two Points</h2>
                <div class="section_instrcutions"></div>
                    <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The distance between two points is the length of the vector between the two points. The length of the vector is given by:
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">Use simple multiplication to derive the square of the values:
                                <pre><code>distanceX = vectorX * vectorX; // distanceX squared</code></pre>
                            Sum the squares of the components and then square root the result. There is a function within C++ to calculate square roots. Add the following two lines of code to the top of your program.
                            <pre><code>#include <complex>
                                    using namespace std;
                                    </code></pre>
                            This will give you access to the C++ maths library. The sqrt() function takes just one parameter
                            <pre><code>float distance;
                                    distance = sqrt( distance ); // the square root of distance
                            </code></pre>
                            Calculate the distance between the turret and the matchbox (the length of the vector). Use these variables for the calculation distance, distanceX, distanceY and distanceZ.
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>5. The Direction Vector</h2>
                <div class="section_instrcutions"></div>
                    <ol>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                You have derived the vector between the turret and the car.  You have also calculated the length of the vector. In order to use these values to move the bullet towards the car you are going to have to calculate the direction vector.
                            </p>
                        </div>
                    </li>   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The direction vector is independent of the distance between two points. For example, it allows you to move a model in a particular direction disregarding the speed of the movement. The vector between the two positions is
                                V(X, Y, Z)
                        The length of this vector is
                                L
                        The direction vector is
                                VDir = (X/L, Y/L, Z/L)
                                <pre><code>float distance = distanceX + distanceY + distanceZ;
                                        distance = sqrt( distance ); // the square root of distance
                                
                                        float directionX = vectorX / distance;
                                        float directionY = vectorY / distance;
		                                float directionZ = vectorZ / distance;
                                </code></pre>
                            </p>
                        </div>
                    </li>   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Calculate the direction vector from the turret to the matchbox. Create three new float variables to perform this calculation: directionX, directionY and directionZ. Do not use reuse the variables from previous steps.
                            </p>
                        </div>
                    </li>   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Check that you are dividing the vector by the distance and not, for example,  distanceX by distance.
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                After the calculations from the previous step, use an ‘if’ statement to test:
                                    (a)	If the distance between the turret and the matchbox is less than 250…
                                    (b)	… and the shoot variable is equal to –1
                                    
                                    If both these conditions are true then:
                                    •	Create a bullet model using the bullet model variable. Create it in the same position as the turret. Note that you are creating the model inside the game loop.
                                    •	Initialise the bullet direction vector variables using directionX, directionY and directionZ from above.
                                    •	Set the shoot variable to 500 – this will be the life-time of the bullet.
                                    
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Now add another ‘if’ statement to test if the ‘shoot’ variable is greater than 0. If so:
                                Move the bullet model by the bullet direction vector. (The bullets move fast, so you may need to scale the move downwards).
                                <pre><code>bullet->MoveX( directionX );
                                        bullet->MoveY( directionY );
                                        bullet->MoveZ( directionZ );
                                </code></pre>      
                            </p>
                        </div>
                    </li>                   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Decrement the shoot variable by 1 – the bullet life decreases as it travels.
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Add a final ‘if’ statement that tests if the ‘shoot’ variable is equal to 0. If so destroy the bullet model. You need a statement like:
                                <pre><code>bulletMesh->RemoveModel( bullet );</code></pre>
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Set the shoot variable to –1 as there is no bullet now
                            </p>
                        </div>
                    </li>  
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                You should now have a turret that tracks your matchbox car and shoots at it when it comes near. Read the code you have written paying special attention to the logic that is used to create and destroy the bullets.
                            </p>
                        </div>
                    </li>        
                </ol>
        </section>
        <section>
            <h2>5. Practice Exercise - COntinued Vectors</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                If you complete the tasks, extend your program by either:
                                <ul>
                                    <li>Test if the bullets have hit the car (using vector distances).</li>
                                    <li>Having the turret shoot more than one bullet at a time.</li>
                                    <li>Adding more turrets.</li>
                                </ul>         
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
    </main>
    <script src="../assets/script.js"></script>
</body>
</html>