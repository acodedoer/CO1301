<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://acodedoer.github.io/CO1301/assets/style.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
    <!-- and it&#039;s easy to individually load additional languages -->
    <script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/go.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <title>CO1301 - Lab 10: Trigonometry, Waves and Points</title>
</head>
<body>
    <header><h1>CO1301: Games Concepts <br>Lab 10 - Trigonometry: Waves and Points</h1></header>
    <main>
        <section>
            <h2>1. Introduction</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                In this lab you will be recreating the trigonometric function waves shown in the lecture.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                               This lab sheet will also provide further practice in the use of arrays and methods.
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
        <section>
            <h2>2. Setting Up</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create a new TL-Engine project called "Lab10_Waves_Project". 
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                We will be creating a program that moves lots of small models along wavy paths. To ensure that we are able to see our models clearly we won't be using any backdrops. 
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create a kManual camera and place it at location ( 13, 0, -17 ).
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Load the sphere mesh and create a sphere model at location (0, 0, 0), then set the skin of the sphere to "RedBall.jpg".
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Scale the sphere model down by a factor of 100.
                            </p>
                            <pre><code>sphere->Scale( 0.01f );</code></pre>
                        </div>
                    </li>

                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Define a constant float called kPi for &#8508, assign it a value of 3.1415926f. Next define a constant float called kEdge for the edge of movement, it should have a value of 8 * &#8508. Finally define a constant float called kSphereSpeed at assign it a value of 10.0f.
                            </p>
<pre><code>const float kPi = 3.1415926f;
const float kEdge = 8 * kPi;
const float kSphereSpeed = 10.0f;
</code></pre>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Write code to move your sphere along the x-axis by kGameSpeed per second. To do this, you need to first add myEngine->Timer() in the initialisation section of your code. Then in the game-loop, immediately after myEngine->DrawScene(), add the following code:
<pre><code>float deltaTime = myEngine->Timer();
sphere->MoveX(kSphereSpeed * deltaTime);
</code></pre>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                               Next, write code in the game-loop to check if the sphere's x-coordinate is greater than or equal to kEdge, if it is then reset it to 0.
                            </p>
<pre><code>if (sphere->GetX() >= kEdge) {
    sphere->SetX(0);
}
</code></pre>
<p>You should now have a sphere moving continuously from left to right.</p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>3. An Array of Spheres</h2>
                <div class="section_instrcutions"></div>
                    <ol>
                        <li>
                            <div class="list-div">
                                <p class= "instruction-item">
                                   In this section you will update your program to use an array of sphere models in place of a single sphere model.
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="list-div">
                                <p class= "instruction-item">
                                    Declare an integer constant called kSpheres and assign it a value of 126.
                                </p>
                            </div>
                        </li>
                         <li>
                            <div class="list-div">
                                <p class= "instruction-item">
                                    Remember arrays? In the initialisation section of your program, remove the code that creates the single sphere model (including the code for scaling it and setting its skin), then declare an array of IModels named "spheres", use kSpheres to specify the size of the array.
                                </p>
                                <pre><code>IModel* spheres[kSpheres];</code></pre>
                            </div>
                        </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Use the for-loop below to create 126 models using the sphere mesh and assign them to the IModels in the spheres array.
                            </p>
<pre><code>for( int i = 0; i < kSpheres; i++ )
{
    spheres[i] = sphereMesh->CreateModel( i * 0.2f, 0, 0 );
    spheres[i]->Scale( 0.01f );
    spheres[i]->SetSkin( "RedBall.jpg" );
}</code></pre>
                            <p class= "instruction-item">
                                Note the way that the loop index is being used to access each individual member of the array, place sphere models in a line along the x axis, scale the models and set their textures.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Update the code in your game-loop by removing the code that moves and resets a single sphere, and adding code to move each sphere in the spheres array along the x-axis by kGameSpeed per second, and reposition it to 0 along the x-axis if its x-coordinate is greater than or equal to kEdge. You will need to use a for-loop.
                            </p>

                            <p>
                                Try writing the code yourself, if (and only if) you are struggling to get it right, have a look at the solution at the end of this page.
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>4. Sine and Cosine Waves</h2>
                <div class="section_instrcutions"></div>
                    <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The next step is to change the path of movement of the spheres to a sine wave.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                               Start by adding this include statement at the top of your cpp file:
                            </p>
                            <pre><code>#include &ltcmath&gt</code></pre>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Set the y-coordinate of each sphere to sin(x), where x is simply the current x-coordinate of the sphere. At the moment as the spheres move across the screen only their x-coordinates are being changed, which is why they move in a straight line. Updating the y-coordinate should produce a sine wave. </p>
                                <p>You will need to update the loop that moves and resets your spheres, so that for each sphere you:
                                <ol>
                                    <li>get the current x-coordinate of the sphere</li>
                                    <li>calulcate sin(x) and set it as the y-coordinate of the sphere </li>
                                </ol>
                            </p>
                            <p>
                                Your spheres should now be moving along the path of a sine wave.
                            </p>
                            <p>
                                Try writing the code yourself, if (and only if) you are struggling to get it right, have a look at the updated for loop at the end of this page.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                To show both sine and cosine waves using the spheres in the array, the two for-loops that create and move the sphere models need to be updated (the modulus operator will be useful for the tasks below).
                            </p>
                                <ul>
                                    <li>
                                        Update the for-loop that creates the sphere models so that every other model created uses the "BlackBall.jpg" skin. Therefore, half the spheres in the array will use the RedBall texture and the other half will use the BlackBall texture.
<pre><code>for (int i = 0; i < kSpheres; i++)
{
    spheres[i] = sphereMesh->CreateModel(i * 0.2f, 0, 0);
    spheres[i]->Scale(0.01f);
    if (i % 2 == 0) {
        spheres[i]->SetSkin("RedBall.jpg");
    }
    else {
        spheres[i]->SetSkin("BlackBall.jpg");
    }
}
</code></pre>
                                    </li>
                                    <li>
                                        Update the for-loop that moves the sphere models so that every other model's y-coordinate is set to the cosine of its x-coordinate. Therefore you will now have 63 red spheres moving in a sine wave and 63 black spheres moving in a cosine wave.
<pre><code>for (int i = 0; i < kSpheres; i++)
{
    spheres[i]->MoveX(kSphereSpeed * deltaTime);
    float currentX = spheres[i]->GetX();
    float newY = 0;
    if (i % 2 == 0) {
        newY=sin(currentX);
    }
    else {
        newY=cos(currentX);
    }
    spheres[i]->SetY(newY);
    if (spheres[i]->GetX() >= kEdge) {
        spheres[i]->SetX(0);
    }
}
</code></pre>
                                    </li>
                                </ul>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                What does this say about the relationship between sine and cosine?
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Try changing the value of kSphereSpeed to a low value e.g. 1 and a high value, see how that affects your waves.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The height of the waves can be adjusted by scaling the y value, try scaling it up and down after you have calculated the value of y from sin(x) and cos(x) (by multiplying with a scaler e.g newY *= 2). Changing the value of y in this fashion is adjusting the amplitude of the wave.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                You can also change the frequency of the waves by changing scaling (up or down) the value of x before calculating sin(x).
                            </p>
                        </div>
                    </li>
                </ol>
        </section>
        <section>
            <h2>5. Points of a Circle</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                This section will guide you through a creating a project that moves a sphere so that it traces the path of circle. This will be done by moving the sphere along points on the circumference of the circle.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create a new TL-Engine project called "Lab10_Circle_Project". 
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Create a kManual camera and place it at location ( 0, 0, -250 ).
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Define a floating point constant called kRadius with a value of 100.0f. This will be the radius of the circle which is going to be created.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Load the sphere mesh and create a sphere model at location (kRadius, 0, 0), then set the skin of the sphere to "RedBall.jpg".
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Define a constant called kPi for &#8508 and assign it a value of 3.1415926f.
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                In the initialisation setion, declare a float called "degrees" to hold the current angle for which the x and y points of the circle are being derived and initialise this variable to 0. Then in your game loop:
                                <ul>
                                    <li>Increment degrees by a small amount (e.g 0.01f) each pass of the game loop</li>
                                    <li>Reset the value degrees back to 0 each time it reaches 360.</lli>
                                </ul>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                However, the trigonometric functions sin(), cos() and tan() in C++ use radians and not degrees. Therefore, you will need to convert the angle stored in the variable "degrees" to radians. Add the code below in the game loop after the code you added in the 5.7
                            </p>
                            <pre><code>float radians = kPi/180 * degrees;</code></pre>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Now that you have the angle in radians,the x and y coordinates of the point associated with this angle can be derived by:
<pre><code>float x = kRadius * cos ( radians );
float y = kRadius * sin ( radians );</code></pre> 
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Use the derived x and y coordinates to update the position your sphere each frame (the z coordinates should be set to 0)
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The sphere should trace out the path of a circle with radius kRadius. 
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>6. Multiple Points Using Arrays</h2>
                <div class="section_instrcutions"></div>
                    <ol>
                            <li>
                            <div class="list-div">
                                <p class= "instruction-item">
                                    Declare a constant integer kSpheres and assign it a value of 8.
                                </p>
                            </div>
                        </li>
                        <li>
                            <div class="list-div">
                                <p class= "instruction-item">
                                    Declare an array of IModels and name it spheres. The array should be of size kSize, i.e. 8, and will be used to store sphere models.
                                </p>
                            </div>
                        </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                    Declare another array of floating point numbers also of size kSpheres and name it "initialAngles", then initialise it as below: 
                            </p>
                            <pre><code>float initialAngles[kSpheres] = { 0, 45, 90, 135, 180, 225, 270, 315 };</code></pre>
                            <p>
                                This array will be used to store the initial angle to be used for each of the spheres in the previous array.
                            </p>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Use a for-loop to create the sphere models for the "spheres" array. Each sphere needs to be re-textured to "RedBall.jpg". 
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Just as was done in section 5, increment the angle of each sphere by a small amount in the game loop and reset it to 0 when it reaches 360, then update the position of each sphere so that its x-coordinate is the cosine of the angle in its equivalent index in the "initialAngles" array and its y-coordinate is the sine of the angle in its equivalent index in the "initialAngles" (note that the angles are in degrees and must be converted to radians first). This will make the spheres move round the circles path. 
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section>
                <h2>7. Utilising Functions</h2>
                <div class="section_instrcutions"></div>
                    <ol> 
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Let us create a function called rotateSpheres() to perform all the operations required to rotate the array of spheres. The function is a void function, i.e. it does not return any values.
                            </p>
                        </div>
                    </li>   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                You will need to move all of the code you've been using to rotate the spheres into the function's body.
                            </p>
                        </div>
                    </li>   
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                The rotateSpheres() function will need to take the array of spheres and the array of degrees as parameters. When the identifier (the name) of an array is used as a parameter, the whole array is passed over. In order to pass an array over to a function, the receiving function needs:
                            </p>
                            <ul>
                                <li>the data type of the array (int, char, float, etc.)</li>
                                <li>the size of the array</li>
                            </ul>
                            <p>
                                Therefore your function definition should be similar to the code below:
                            </p>
<pre><code>void rotateSpheres( IModel* spheresArray[], float degreesArray[], int sizeOfArrays )
{
//function body goes here
}</code></pre>
                                                   
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                In order to invoke the above array you would call it by name and place the name of the array of spheres inside the round brackets, e.g.
                            </p>
                            <pre><code>rotateSpheres( spheres, degrees, kSpheres );</code></pre>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Modify your code to include the rotateSpheres() declaration and definition, then invoke the function in your game-loop with the approrpiate parameters.
                            </p>
                        </div>
                    </li>        
                    
                    
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Change kRadius from a constant into a normal variable and rename it so that it no longer uses the k prefix. Set up two keys so that you are able to increase and decrease the size of the radius whilst the program is running.
                            </p>
                        </div>
                    </li>      
                </ol>
        </section>
        <section>
            <h2>8. Solution Code</h2>
            <div class="section_instrcutions"></div>
                <ol>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Code for 3.5
                            </p>
<pre><code>for (int i = 0; i < kSpheres; i++)
{
    spheres[i]->MoveX(kSphereSpeed * deltaTime);
    if (spheres[i]->GetX() >= kEdge) {
        spheres[i]->SetX(0);
    }
}</code></pre>
                        </div>
                    </li>
                    <li>
                        <div class="list-div">
                            <p class= "instruction-item">
                                Code for 4.3
                            </p>
<pre><code>for (int i = 0; i < kSpheres; i++)
    {
        spheres[i]->MoveX(kSphereSpeed * deltaTime);
        float currentX = spheres[i]->GetX();
        float newY = sin(currentX);
        spheres[i]->SetY(newY);
        if (spheres[i]->GetX() >= kEdge) {
            spheres[i]->SetX(0);
        }
    }</code></pre>
                        </div>
                    </li>
            </ol>
        </section>

    </main>
    <script src="https://acodedoer.github.io/CO1301/assets/script.js"></script>
</body>
</html>